ERROR_MESSAGES = {
    2011: "Неизвестный тип заявки. Проверьте параметры ордера.",
    26: "Операция не разрешена.",
    400: "Ошибка авторизации. Проверьте API ключи.",
    401: "Нет прав для выполнения запроса. Проверьте настройки API ключей.",
    403: "Доступ запрещён. Проверьте разрешения API ключей.",
    10072: "Пара API-ключей неактивна или удалена. Проверьте ключи в /set_keys.",
    602: "Ошибка подписи. Проверьте секретный ключ.",
    730700: "Комментарий к API ключу не может быть пустым.",
    730701: "Разрешения API ключа не заданы.",
    730702: "Разрешения API ключа не существуют.",
    730706: "Информация по API ключу не найдена.",
    730707: "Ключ доступа не может быть пустым.",
    429: "Слишком много запросов. Попробуйте позже.",
    500: "Внутренняя ошибка сервера. Попробуйте позже.",
    503: "Сервис временно недоступен. Попробуйте позже.",
    504: "Тайм-аут шлюза. Попробуйте позже.",
    20002: "Внутренняя ошибка системы. Свяжитесь с поддержкой.",
    10007: "Неверный тикер. Проверьте символ.",
    10073: "Рассинхронизация времени. Синхронизируйте время на устройстве.",
    10095: "Размер заявки не может быть 0.",
    10102: "Размер заявки не может быть 0 или отрицательным.",
    10096: "Слишком много знаков после запятой в размере заявки.",
    10097: "Ошибка в размере заявки. Попробуйте изменить количество.",
    10098: "Система контроля рисков отклонила заявку. Измените количество.",
    200004: "Недостаточно средств. Проверьте баланс.",
    30004: "Недостаточно USDT для совершения покупки.\n\nДоступный баланс должен быть на 1% больше суммы покупки (настраивается в /parameters).",
    30001: "Нельзя открыть ордер в этом направлении.",
    30002: "Размер заявки меньше минимально допустимого.",
    30003: "Размер заявки превышает максимально допустимый.",
    30005: "Нельзя закрыть больше, чем у вас есть.",
    30010: "Некорректная цена заявки.",
    30014: "Неверный символ.",
    30016: "Торговля этим инструментом отключена.",
    30021: "Инструмент недоступен.",
    30018: "Рыночные заявки недоступны.",
    30019: "Рыночные заявки через API недоступны.",
    30020: "Нет разрешений для торговли этим тикером.",
    30027: "Достигнут лимит по позиции. Покупка приостановлена.",
    30028: "Биржа отклонила продажу из-за контроля рисков.",
    30029: "Размер заявки превышает лимит.",
    30032: "Размер позиции превышает лимит.",
    30041: "Тип заявки недоступен для данного инструмента.",
    33333: "Ошибка в параметрах запроса.",
    44444: "Отсутствуют обязательные параметры.",
    70011: "API ключи заблокированы или не имеют разрешений.",
    700001: "Неверный формат API ключа.",
    700003: "Рассинхронизация времени. Проверьте настройки часов.",
    700005: "Параметр `recvWindow` слишком велик.",
    700004: "ID заявки не может быть пустым.",
    700006: "Неверный IP. Проверьте список доверенных IP.",
    700007: "Нет разрешения на доступ к API.",
    730703: "Неверный IP. Разрешено до 10 адресов.",
    730704: "Неверный формат IP.",
    730000: "Запрос отклонён. Свяжитесь с поддержкой.",
    730001: "Ошибка в информации о пользователе. Обратитесь в поддержку.",
    730002: "Операция невозможна. Обратитесь в поддержку.",
}


import re

def parse_mexc_error(e: Exception) -> str:
    error_text = str(e)
    match = re.search(r'"code":\s*(\d+)', error_text)
    if match:
        code = int(match.group(1))
        if code in ERROR_MESSAGES:
            return ERROR_MESSAGES[code]
    return f"Произошла ошибка:\n<code>{error_text}</code>"
